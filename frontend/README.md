# React code

- First run "npm install" to download the node packages.
- Then run "npm run" to start the server.
- Frontend server runs on 3000 port while backend should run on 6000 for inpainting.
  
## Used UI packgae
- [MUI material](https://mui.com/)


## Structure
### src/dashboard:
#### Dashboard.js: main root for the frontend components
  - Loading all required pre-generated json data
    - **keywords_all.json**: all the keywords data from B2T;
    - **keywords_lime.json**: Concept Lime result for selected keywords from original keywords;
    - **prediction.json**: predictions and captions for validation dataset;
    - **panoptic.json**: paths of segmented results by SEEM for each image in the training dataset;
    - **panoptic_categories.json**: segmented categories by SEEM for original training dataset;
    - **file_list.json**: paths of validition image dataset;
    - **reverted_image.json**: info of reverted image based on different keywords;
    - **coordinates.json**: coordinates data generated by GRID
  - Set the data to be transmitted globally
    - **solutions**: solution keywords and image number to be augmented, which will be passed into inpainting module;
    - **keywordMode**: flag variable indicating the if the user are manually adding new keywords;
    - **selectedImages**: select image paths when hover on the certain keyword;
    - **draggedKeywordObj**: keyword and corresponding data when starting drag the keyword
  - Initialize all the sub-components
    - **Image Pannel**: Image.js;
    - **Preview and Caption pannel**: Popover.js;
    - **Keywords Pannel**: Keyword.js, ./RevertedImage/;
    - **Solver Pannel**: Solver.js, Rule.js;
    - **Inpainter Pannel**: Inpainter.js, ./InpainterBlock/


#### Images.js: Grid layout for keywords
#### Keywords.js: Table layout for keywords
  - Accepting the processed keywords from root;
  - Using an internal flag variable indicating whether using Lime Results;
  - Table, TableBody, TableCell, TableHead, TableRow from MUI are used for showing the table;
  - Import reverted image pannel from /RevertedImage/index.js, and only showed whe using the Lime Results

#### Inpainter.js: Entry for inpainting block
  - Based on the array of solutions generating different inpainter block;

#### InpainterBlock/:
  - **index.js**: root entry for each inpainting block, including segmented catergories (Shortcut), images, image masks(together in ImageMask), inpaint button, and also a popup modal for showing the message when needing waiting for API response;
  - **Drawer**: popup Modal from MUI to show the draw panel (deprecated now);
  - **hooks**: data control-manager for all those sub-component presentation;
  - **ImageMask**: image panel and their corresponding panel;
  - **Message**: message modal;
  - **Shortcut**: segmented catergories (Shortcut) panel

#### Popover.js: small screen showing image sample and caption
#### **You may redesign all of the components below.**
  - Rule.js: panel where people can drag-n-drop keywords to form multiple bias concepts
  - Solver.js: panel where the number of images to generate is calculated

